{% extends 'base.html' %}

{% block title %}{{ item['name'] }} - Inventory Management System{% endblock %}

{% block content %}
<div class="view-container">
    <a href="{{ url_for('index') }}" class="back-link">← Back to Inventory</a>
    
    <div class="view-card">
        <div class="view-image-section">
            {% if item['image_filename'] %}
                <img src="{{ url_for('static', filename='uploads/' + item['image_filename']) }}" 
                     alt="{{ item['name'] }}" class="view-image">
            {% else %}
                <div class="view-no-image">
                    <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <circle cx="8.5" cy="8.5" r="1.5"></circle>
                        <polyline points="21 15 16 10 5 21"></polyline>
                    </svg>
                    <span>No image available</span>
                </div>
            {% endif %}
        </div>
        
        <div class="view-info-section">
            <div class="view-header">
                <span class="category-badge large">{{ item['category'] }}</span>
                <h1>{{ item['name'] }}</h1>
            </div>
            
            <div class="view-stats">
                <div class="view-stat">
                    <span class="stat-label">Item ID</span>
                    <span class="stat-value">#{{ item['id'] }}</span>
                </div>
                <div class="view-stat">
                    <span class="stat-label">Quantity</span>
                    <span class="stat-value">
                        {% if item['quantity'] == 0 %}
                            <span class="stock-badge out">Out of Stock</span>
                        {% elif item['quantity'] < 10 %}
                            <span class="stock-badge low">{{ item['quantity'] }} units</span>
                        {% else %}
                            {{ item['quantity'] }} units
                        {% endif %}
                    </span>
                </div>
                <div class="view-stat">
                    <span class="stat-label">Unit Price</span>
                    <span class="stat-value price">£{{ "%.2f"|format(item['price']) }}</span>
                </div>
                <div class="view-stat highlight">
                    <span class="stat-label">Total Value</span>
                    <span class="stat-value price">£{{ "%.2f"|format(item['quantity'] * item['price']) }}</span>
                </div>
            </div>
            
            <div class="view-timestamps">
                <p><strong>Added:</strong> {{ item['created_at']|datetime }}</p>
                <p><strong>Last Updated:</strong> {{ item['updated_at']|datetime }}</p>
            </div>
            
            <div class="view-actions">
                <a href="{{ url_for('edit_item', id=item['id']) }}" class="btn btn-warning">Edit Item</a>
                <form action="{{ url_for('delete_item', id=item['id']) }}" method="POST" class="inline-form"
                      onsubmit="return confirm('Are you sure you want to delete this item?');">
                    <button type="submit" class="btn btn-danger">Delete Item</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
